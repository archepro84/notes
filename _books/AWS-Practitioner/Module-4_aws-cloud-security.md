# 모듈 4: AWS 클라우드 보안

## 1: AWS 공동 책임 모델

### AWS의 책임

- 소프트웨어 가상화 계층부터 AWS 서비스가 운영되는 시설의 물리적 보안에 이르기까지 구성 요소를 운영, 관리 및 제어한다.
- AWS 클라우드에 제공된 모든 서비스를 실행하는 인프라를 보호할 책임이 존재한다.

### 고객의 책임

- 유휴 데이터와 전송 중 데이터를 암호화할 책임이 존재한다.
- 네트워크에 보안을 구성하고 보안 자격 증명 및 로그인을 안전하게 관리할 책임이 존재한다.
- 보안 그룹의 구성과 **컴퓨팅 인스턴스(업데이트 및 보안 패치 포함)에서 실행되는 운영체제**의 구성에 대한 책임이 존재한다.

### AWS의 책임: 클라우드의 보안

- 데이터 센터의 물리적 보안
    - 필요 기반의 제어된 액세스
- 하드웨어 및 소프트웨어 인프라
    - 스토리지 폐기, 호스트 OS 액세스 로깅 및 감사
- 네트워킹 인프라
    - 침입 탐지
- 가상화 인프라
    - 인스턴스 격리
- IP 스푸핑 및 패킷 스니핑으로부터 보호
- RDS 인스턴스에 **최신 보안 패치** 설치

### 고객의 책임: 클라우드에서의 보안

- AWS 서비스를 사용하여 구현한 것과 AWS에 연결되는 어플리케이션에 대한 책임이 존재한다.
- 인스턴스 운영 체제의 선택 및 보안
- AWS 리소스에서 시작되는 어플리케이션 보안
- 보안 그룹 구성
- 방화벽 구성
- 네트워크 구성
- 보안 계정 관리
- EC2 인스턴스에서 **게스트 운영 체제** 업데이트
- 어떤 사용자가 EC2 인스턴스에 액세스할 수 있는지 식별하고, 운영체제에서 해당 권한을 관리
- EC2 인스턴스를 생성하거나 삭제할 수 있는 **사용자 식별 및 관리**

### AWS와 고객 모두에게 적용되는 공유 제어

- 리소스 구성 관리
- 직원 인식 및 교육

### IaaS(서비스형 인프라, Infra as a Service)

- EC2, EBS, VPC
- 고객은 네트워킹 및 스토리지 설정을 보다 유연하게 구성할 수 있다
- 보안의 더 많은 측면을 고객이 관리해야함
- **액세스 제어를 고객이 구성**

### PaaS(서비스형 플랫폼, Platform as a Service)

- Lambda, RDS, Beanstalk
- 고객이 기본 인프라를 관리할 필요가 없음
- 운영 체제, 데이터베이스 패치 적용, 방화벽 구성 및 재해 복구를 AWS가 처리
- 고객은 코드 또는 데이터 관리에 집중할 수 있음

### SaaS(서비스형 소프트웨어, Software as a Service)

- Trusted Advisor, Shield, Chime
- 소프트웨어가 중앙에서 호스팅됨
- 구독 모델 또는 종량 과금제로 라이센스가 부여됨
- 일반적으로 웹 브라우저, 모바일 앱 또는 API를 통해 서비스에 액세스함
- 고객은 서비스르 지원하는 인프라를 관리할 필요가 없음

### 정리

- AWS와 고객은 공동으로 보안을 책임진다.
    - AWS는 클라우드**의** 보안을 책임진다.
    - 고객은 클라우드**에서의** 보안을 책임진다.
- AWS는 AWS 클라우드 서비스를 실행하는 인프라(하드웨어, 소프트웨어, 네트워킹 및 시설 등)를 보호할 책임이 있다.
- IaaS로 분류되는 서비스의 경우 **고객은 필요한 보안 구성 및 관리 작업을 수행할 책임**이 있다.

## 2: AWS Identity and Access Management(IAM)

### AWS Identity and Access Management(IAM)

- AWS 리소스에 대한 액세스 관리
- AWS 클라우드의 컴퓨팅, 스토리지, 데이터베이스, 어플리케이션 서비스에 대한 **액세스를 제어**할 수 있다.
- 세분화된 액세스 권한 관리
    - 리소스에 액세스할 수 있는 **사용자**
    - **액세스할 수 있는 리소스**와 **사용자가 리소스에서 수행할 수 있는 작업**
    - **리소스에 액세스하는 방법**
- Amazon EC2 인스턴스에서 실행되는 어플리케이션에 **권한을 부여**할 수 있다.

### IAM: 필수 구성요소

- 사용자(User)
    - AWS 계정으로 인증할 수 있는 사람 또는 어플리케이션
- 그룹(Group)
    - 동일한 권한 부여를 허락받은 사용자의 모음
- 정책(Role)
    - 액세스할 수 있는 리소스와 각 리소스에 대한 액세스 수준을 정의하는 문서
- 역할(Policy)
    - AWS 서비스 요청을 위한 권한 셋을 부여하는 메커니즘

### 권한 부여

- 사용자, 서비스 또는 어플리케이션에 부여해야하는 권한을 결정하는 프로세스
- 사용자는 인증 후 AWS 서비스에 액세스할 수 있는 권한을 부여 받아야 한다.
- 권한이 허용되는 리소스와 작업을 결정한다.
    - 기본적으로 모든 권한은 암시적으로 거부된다
    - **명시적으로 거부된 항목은 절대 허용되지 않는다.**
    - 모범 사례: 최소 권한의 원칙을 따른다.

### IAM 정책

- **자격 증명 기반 정책**
    - 정책을 모든 IAM 엔티티에 연결
        - IAM 사용자, 그룹 또는 역할
    - 단일 정책을 여러 엔티티에 연결할 수 있음
    - 단일 엔티티에 여러 정책을 연결할 수 있음
- **리소스 기반 정책**
    - 리소스(S3 Bucket)에 연결됨
    - **인라인으로만 정의**되어, 개별 IAM 정책 문서를 생성하여 연결하는 것이 아니라 **리소스 자체에 대한 정책을 정의**해야한다.

### 정리

- IAM 정책은 JSON으로 작성되며 권한을 정의한다.
    - IAM 정책은 모든 IAM 엔티티에 연결될 수 있다
    - 엔티티: 사용자, 그룹, 역할
- IAM 사용자는 사람, 어플리케이션, 서비스에서 AWS에 인증할 수 있는 방법을 제공한다.
- IAM 그룹은 동일한 정책을 **여러 사용자에게 연결**하는 간단한 방법
- IAM 역할에는 권한 정책이 연결될 수 있으며 사용자 또는 어플리케이션에 **임시 액세스 권한을 위임**하는 데 사용될 수 있다.

## 3: 새 AWS 계정 보안

### 새 AWS 계정 보안: 계정 루트 사용자

1. 계정 루트 사용자의 사용을 가능한한 빨리 중지한다.
2. MFA(Multi-Factor Authenticdation)를 활성화한다.
3. AWS CloudTrail을 사용한다.
    - 90일이 지난 로그를 활성화하고 지정된 이벤트 알림 기능을 활성화하려면 추적을 생성한다.
4. 결제 보고서(ex: AWS 비용 및 사용 보고서)활성화

### 정리

- AWS 계정 보안을 위한 모범 사례
    - MFA를 사용하여 로그인 보호
    - 계정 루트 사용자 액세스 키를 삭제
    - 개별 IAM 사용자를 생성하고 **최소 권한의 원칙**에 따라 권한을 부여
    - 그룹을 사용하여 IAM 사용자에게 권한을 할당
    - 강력한 암호 정책을 구성
    - 자격 증명을 공유하는 대신 **역할을 사용하여 위임**
    - AWS CloudTrail을 사용하여 **계정 활동을 모니터링**한다.

## 4: 계정 보안

### AWS Organizations

- 여러 AWS 계정을 통합하여 중앙에서 관리할 수 있다.
- 계정 간에 **사전 구매한 Amazon EC2 리소스를 공유**할 수 있다.

### AWS Organizations의 보안 기능

- 계정을 OU(조직 단위)로 그룹화하고 각 OU에 **다른 액세스 정책을 연결**한다.
- IAM에 대한 통합 및 지원
- 서비스 정책을 사용하여 각 AWS 계정이 액세스할 수 있는 **AWS 서비스 및 API 작업에 대한 제어를 설정**할 수 있다.

### AWS Organizations: 서비스 제어 정책

- SCP(Service Controll Policy)는 계정에 대한 중앙 집중식 제어를 제공한다.
    - 조직에 포함된 계정에서 사용할 수 있는 권한을 제한한다.
- 계정이 **액세스 제어 지침을 준수하는지 확인**한다.
- SCP는 IAM 권한 정책과 유사하다.
    - 비슷한 구문 사용
    - SCP는 권한을 부여하지 않는다.
    - SCP는 조직의 **최대 권한을 지정**한다.

### AWS Key Management Service(AWS KMS)

- 암호화 키를 생성하고 관리할 수 있다.
- AWS 서비스 및 어플리케이션 전체의 암호화 사용을 제어할 수 있다.
- AWS CloudTrail과 통합할 경오 모든 키 사용을 로깅한다.

### AWS Cognito

- 웹 및 모바일 어플리케이션에 **사용자 가입, 로그인 및 액세스 제어**를 추가한다.

### AWS Shield

- **DDoS 방어**를 위한 관리형 서비스
- AWS에서 실행되는 **어플리케이션 보호**
- 상시 탐지 및 자동 인라인 완화 제공
- 어플리케이션 다운타임과 지연 시간을 최소화할 수 있다.

## 5: AWS의 데이터 보안

### 유휴 데이터 암호화

- 암호화는 읽을 수 없는 보안 키로 데이터를 인코딩한다.
- 보안키가 있는 사용자만 데이터를 디코딩 할 수 있다
- AWS KMS에서 보안 키를 관리할 수 있다.

### 전송 중 데이터의 암호화 = AWS Certificate Manager

- TLS/SSL 개방형 표준 프로토콜
- 보안 HTTP(HTTPS)는 보안 터널을 생성한다.
- AWS 서비스는 전송 중 데이터 암호화를 지원한다.

## 6: 규정 준수 보장 작업

### AWS Config

- 리전별 서비스이다. 리전간 리소스를 추적하려면 사용하는 모든 리전에서 해당 리소스를 활성화한다.
- AWS 리소스의 **구성을 측정, 감사 및 평가**한다.
- 구성을 **지속적으로 모니터링** 하는데 사용된다.
- 기록된 구성과 원하는 구성을 자동으로 비교하여 평가한다.
- 구성 변경을 검토한다.
- 세부 구성 기록을 본다.
- 규정 준수 감사 및 보안 분석을 간소화한다.

### AWS Artifact

- 규정 준수 관련 정보를 위한 리소스이다.
- **보안 및 규정 준수 보고서**에 액세스하고 온라인 계약을 선택할 수 있다.
- AWS Management Console에서 직접 AWS Artifact에 액세스할 수 있다.

### 정리

- AWS 보안 규정 준수 프로그램은 AWS 가 설정하고 운영하는 정책, 프로세스 및 제어에 대한 정보를 제공한다.
- AWS Config는 AWS 리소스 구성을 측정, 감사 및 평가하는 데 사용된다.
- AWS Artifact는 보안 및 규정 준수 보고서에 대한 액세스를 제공한다.

## Wrap up

- 공동 책임 모델 이해
- 고객및 AWS의 책임 확인
- IAM 사용자, 그룹및 역할 이해
- IAM의 다양한 보안 자격 증명 유형 설명
- 새 AWS 계정 보안을 위한 단계 확인
- IAM 사용자및 그룹 탐색
- AWS 데이터를 보호하는 방법 이해
- AWS 규정 준수 프로그램 이해