# 모듈 6: 컴퓨팅

## 1: 컴퓨팅 서비스 개요

- EC2 Auto Scaling
    - EC2 인스턴스를 자동으로 시작하거나 종료하는 조건을 정의할 수 있도록하여 어플리케이션의 가용성을 지원한다.
- VMware Cloud on AWS
    - 맞춤형 하드웨어 없이 하이브리드 클라우드를 브로비저닝할 수 있다.
- AWS Elastic Beanstalk
    - 간편하게 웹 어플리케이션을 실행하고 관리할 수 있다.
- Amazon Lightsail
    - 어플리케이션 또는 웹 사이트를 구축할 수 있는 간편한 서비스 제공
- AWS Batch
    - 규모에 관계없이 **배치 작업**을 실행할 수 있는 도구를 제공
- AWS Fargate
    - 서버 또는 클러스터를 관리해야 하는 부담이 적은 컨테이너를 실행하는 서비스 제공
- AWS Outposts
    - **온프레미스 데이터 센터**에서 엄선된 **AWS 서비스를 실행**할 수 있도록 지원
- AWS Serverless Application Repository
    - 서버리스 어플리케이션을 검색, 배포 및 게시할 수 있음

### 최적의 컴퓨팅 서비스 선택

- 고려해야 할 몇 가지 측면
    - 어플리케이션 설계
    - 사용 패턴
    - 관리한 구성 설정

## 2,3,4: Amazon EC2

### Amazon Elatic Compute Cloud(AWS EC2)

- 기존 온프레미스 서버에서 실행하는 것과 동일한 유형의 어플리케이션을 호스팅할 수 있는 가상 머신을 제공
- 클라우드에서 안전하고 크기 조정이 가능한 컴퓨팅 파워를 제공
- Amazon Machine Image(AMI)에서 인스턴스 시작
- Elastic Compute Cloud
    - Elastic (탄력적): 어플리케이션을 자동으로 지원하기 위해 실행하는 서버 수, 크기를 손쉽게 늘이거나 줄일 수 있음.
    - Compute: 실행되는 어플리케이션을 호스팅하거나 데이터를 처리하는 것
    - Cloud: 실행하는 EC2 인스턴스가 클라우드에서 호스팅되는 것

### 인스턴스 시작 마법사를 사용하여 선택하는 사항

1. AMI
2. 인스턴스 유형
3. 네트워크 설정
4. IAM 역할
5. 사용자 데이터(User Data)
6. 스토리지 옵션
7. 태그
8. 보안 그룹(Security Group)
9. 키 페어(Keypair)

### Amazon Machine Image(AMI)

- EC2 인스턴스(가상 머신 또는 VM)를 생성하는 데 사용되는 템플릿
- 어떤 소프트웨어가 사전 설치되어 있는 경우가 많음
- 커스텀 및 커뮤니티 AMI를 생성하여 다른 사용자가 공유하는 AMI를 사용할 수 있음

### 인스턴스 유형 범주

- 범용
- 컴퓨팅 최적화
- 메모리 최적화
- 스토리지 최적화
- 가속화 컴퓨팅
- 패밀리, 세대, 및 크기 제공
    - t3.micro
    - t : 패밀리 이름
    - 3: 세대 번호
    - micro: 크기

### 인스턴스 유형: 네트워킹 기능

- **네트워크 대역폭(Gbps)은 인스턴스 유형에 따라 다름**
- 인스턴스 유형의 네트워킹 및 대역폭 성능을 극대화 하기 위해 클러스터 배치 그룹에서 인스턴스를 시작한다.
- Elastic Network Adapter(ENA): 최대 100Gbps의 네트워크 속도 지원
- 인텔 82599 Virtual Function 인터페이스: 최대 10Gbps의 네트워크 속도 지원

### IAM 역할 연결

- EC2 인스턴스에 연결된 AWS Identity and Access Management(IAM) 역할(Role)은 **인스턴스 프로파일에 보관**된다.

### 사용자 데이터(UserData)

- **인스턴스 시작 시** 사용자 데이터 스크립트 지정
- 사용자 데이터 스크립트를 사용하여 **인스턴스의 런타임 환경을 사용자 지정**

### EC2 스토리지 옵션

- Amazon Elastic Block Stroe(EBS)
- Amazon EC2 인스턴스 스토어
    - 스토리는 EC2 인스턴스가 실행 중인 호스트 컴퓨터에 연결된 디스크에서 제공
    - **인스턴스가 중지되면 여기에 저장된 데이터가 삭제**됨

### Key Pair(키 페어)

- AWS에 저장하는 퍼블릭 키
- 사용자가 저장하는 프라이빗 키 파일

### 모니터링을 위한 Amazon CloudWatch

- 실시간에 가까운 지표 제공
- 15개월 동안의 기록 데이터 유지
- 기본 모니터링
    - 기본 기능, 추가 비용 없음
    - **5분마다** CloudWatch로 지표 데이터 전송
- 세부 모니터링
    - 미리 선택한 7개의 지표에 대한 고정 월별 요금
    - **1분마다** 지표 데이터 전송

### 정리

- EC2를 사용하면 클라우드에서 Window 및 Linux 가상 머신을 사용할 수 있다.
- AMI 템플릿에서 계정의 VPC로 EC2 인스턴스를 시작한다.
- 여러 인스턴스 유형 중에서 선택할 수 있다.
- Amazon EBS를 사용하는 인스턴스만 중지할 수 있다.
- Amazon CloudWatch를 사용하여 EC2 인스턴스에 대한 지표를 캡처하고 검토할 수 있다.

## 5: Amazon EC2 비용 최적화

### 온디맨드 인스턴스

- 낮은 비용과 유연성
- **변동이 심하거나 예측하기 힘든 단기 워크로드**
- 어플리케이션 개발 또는 테스트

### 스팟 인스턴스

- 대규모 동적 워크로드
- 시작 및 종료 시간이 자유로운 어플리케이션
- 컴퓨팅 가격이 매우 저렴해야만 수익이 나는 어플리케이션
- 대량의 용량 추가로 긴급히 컴퓨팅 파워가 필요한 사용자

### 예약 인스턴스

- 필요할 때 컴퓨팅 파워를 이용할 수 있도록 보장하는 예측 가능성
- **안정적 상태 또는 예측 가능한 사용량 워크로드**
- 재해 복구 등 예약된 용량이 필요한 어플리케이션
- 총 컴퓨팅 비용을 절감하기 위해 선결제 금액을 지불할 수 있는 사용자

### 전용 호스트

- **라이센싱 비용 절감**
- 규정 및 규제 요건 충족
- 기존 보유 라이센스 사용(BYOL)
- **규정 준수 및 규제 제한**
- 사용량 및 라이센스 추적
- 인스턴스 배치 제어

### 비용 최적화의 4가지 원칙

- **적절한 크기**
- **탄력성 증대**
    - 자주 사용되지 않는 Amazon EBS 지원 인스턴스를 중지 또는 최대 절전모드로 전환
- **최적의 요금 모델**
    - 사용 패턴 고려
    - 온디맨드 및 스팟 인스턴스 사용
    - 에측 가능한 워크로드에 예약 인스턴스 사용
    - 서버리스 솔루션 고려
- **스토리지 선택 최적화**
    - EBS 볼륨 크기 조정
    - EBS 볼륨 유형 변경
    - 더 이상 필요하지 않은 EBS 스냅샷 삭제

### 측정, 모니터링 및 개선

- **비용 최적화는 지속적인 프로세스** 이다.
- 권장사항
    - **비용 할당 태깅**을 정의하고 적용한다.
    - 지표를 정의하고, 대상을 설정하고 ,정기적으로 검토한다.
    - 팀이 비용을 고려하여 설계하도록 장려
    - **개인이나 팀에 최적화**에 대한 책임 부여

## 6: 컨테이너 서비스

### 컨테이너 기본 사항

- 컨테이너는 운영체제를 가상화하는 방식 중 하나이다.
- 반복 가능
- **독립형 실행환경**
- 소프트웨어가 서로 다른 환경에서 동일하게 실행됨
- **가상머신보다 빠르게 시작이나 중지 또는 종료**할 수 있음
- 컨테이너에는 소프트웨어 어플리케이션을 실행하는 데 필요한 모든 항목이 존재한다.

## 7: AWS Lambda 소개

### AWS Lambda

- 서버리스 컴퓨팅 서비스
    - 서버리스 컴퓨팅은 인프라 관리를 AWS로 오프로드될 수 있도록 만든다.
- 코드가 실행되지 않을 때는 요금이 부과되지 않는다.
- 여러 프로그래밍 언어 지원
- **완전히 자동화된 관리**
- **내결함성 기본 제공**
- **여러 함수의 오케스트레이션 지원**
- **사용량에 따라 요금 지불**

### AWS Lambda 제한

- 리전당 소프트 제한
    - 동시 실행 = 1,000
    - 함수 및 계층 스토리지 = 75GB
- 개별 함수에 대한 하드 제한
    - 최대 함수 메모리 할당 = 3,008MB
    - 함수 제한 시간 = 15분
    - 배포 패키지 크기 = 압축 해제 시 250MB(계층 포함)

## 8: AWS Elastic Beanstalk 소개

### AWS Elastic Beanstalk

- **웹 어플리케이션을 쉽게 시작 및 실행**할 수 있는 방법
- 다음을 자동으로 처리하는 관리형 서비스
    - 인프라 프로비저닝 및 구성
    - 배포
    - 로드 밸런싱
    - 자동 조정
    - 상태 모니터링
    - 분석 및 디버깅
    - 로깅
- Elastic Beanstalk에 대한 추가 요금 없음
    - 사용한 기본 리소스에 대해서만 요금 지불
- **사용자가 코드 업로드 → Elatic Beanstalk가 배포를 자동으로 처리**

### AWS Elastic Beanstalk의 이점

- 빠르고 간편하게 사용 시작
- 개발자 생산성
- 확장의 어려움
- 완벽한 리소스 제어